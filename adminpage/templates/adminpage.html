{% extends 'base.html' %}
{% load static %}
 
{% block meta %}
<title>Admin Page</title>
<link href="{% static 'css/navbar.css' %}" rel="stylesheet" />
<link href="{% static 'css/adminpage.css' %}" rel="stylesheet" />
{% endblock meta %}
{% block content %}
    {% include 'navbar.html' %}
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript">
            $(function () {
                $('#btnAdd').on('click', function () {
                    var title, description, id;
                    id = $("#txtId").val();
                    title = $("#txttitle").val();
                    description = $("#txtdescription").val();
 
                    var edit = "<a class='edit' href='JavaScript:void(0);' >Edit</a>";
                    var del = "<a class='delete' href='JavaScript:void(0);'>Delete</a>";
 
                    if (title == "" || description == "") {
                        alert("title and description fields required!");
                    } else {
                        var table = "<tr><td>" + id + "</td><td>" + title + "</td><td>" + description + "</td><td>" + edit + "</td><td>" + del + "</td></tr>";
                        $("#tblCustomers").append(table);
                    }
                    id = $("#txtId").val("");
                    title = $("#txttitle").val("");
                    description = $("#txtdescription").val("");
                    Clear();
                });
 
                $('#btnUpdate').on('click', function () {
                    var title, description, id;
                    id = $("#txtId").val();
                    title = $("#txttitle").val();
                    description = $("#txtdescription").val();
 
                    $('#tblCustomers tbody tr').eq($('#hfRowIndex').val()).find('td').eq(1).html(title);
                    $('#tblCustomers tbody tr').eq($('#hfRowIndex').val()).find('td').eq(2).html(description)
 
                    $('#btnAdd').show();
                    $('#btnUpdate').hide();
                    Clear();
                });
 
                $("#tblCustomers").on("click", ".delete", function (e) {
                    if (confirm("Are you sure want to delete this record!")) {
                        $(this).closest('tr').remove();
                    } else {
                        e.preventDefault();
                    }
                });
 
                $('#btnClear').on('click', function () {
                    Clear();
                });
 
                $("#tblCustomers").on("click", ".edit", function (e) {
                    var row = $(this).closest('tr');
                    $('#hfRowIndex').val($(row).index());
                    var td = $(row).find("td");
                    $('#txtId').val($(td).eq(0).html());
                    $('#txttitle').val($(td).eq(1).html());
                    $('#txtdescription').val($(td).eq(2).html());
                    $('#btnAdd').hide();
                    $('#btnUpdate').show();
                });
            });
            function Clear() {
                $("#txtId").val("");
                $("#txttitle").val("");
                $("#txtdescription").val("");
                $("#hfRowIndex").val("");
            }
        </script>
              <nav class="navbar navbar-dark bg-mynav">
              <h3>Admin Page</h3>
                </div>
              </nav>
              <div class="container-fluid" >
                <form action="https://www.google.com/search" method="get" class="form-control-plaintext">
                  <button class="btn btn-outline-success btn-rounded btn-sm my-0" type="submit">Search for events on Google</button>
                  </span>
              </div>
          </nav>
          <div class="modal fade" id="add-new-task" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
              <div class="modal-dialog">
                  <div class="modal-content">
                              </div>
                              </div>
                          </form>
                      </div>
                  </div>
                </div>
          <div class="card text-bg-light mb-3" style="max-width: 50rem; align-items:center">
                  <h2>⌞LIST EVENTS⌝</h2>
                  <div id="task-cards"></div></div>
                  <div class="card text-bg-light mb-3" style="max-width: 50rem; align-items:center">
                  <input type="hidden" id="hfRowIndex" value="" />
                  <table class="table">
                      <tr>
                          <td>No.</td>
                          <td>
                              <input type="text" title="Id" id="txtId" value="" />
                          </td>
                      </tr>
                      <tr>
                          <td>Title</td>
                          <td>
                              <input type="text" title="title" id="txttitle" value="" />
                          </td>
                      </tr>
                      <tr>
                          <td>Description</td>
                          <td>
                              <input type="text" title="description" id="txtdescription" value="" />
                          </td>
                      </tr>
                      <tr>
                          <td>
                            <ul class="navbar-nav">
                              <button type='button' class="btn btn-success" id='btnAdd'>Add</button>
                              <button type='button' class="btn btn-success" id='btnUpdate' style="display: none;">Update</button>
                          </td>
                          <td>
                            <ul class="navbar-nav">
                              <button type='button' class="btn btn-success" id='btnClear'>Clear</button>
                          </td>
                      </tr>
                  </table>
                  <table id="tblCustomers" class="table">
                      <thead>
                          <tr>
                              <th></th>
                              <th>Title</th>
                              <th>Description</th>
                              <th>Description</th>
                              <th>Actions</th>
                          </tr>
                      </thead>
                      <tbody></tbody>
                  </table>
                  </div>
                  <div class="card text-bg-light mb-3" style="max-width: 50rem; align-items:center">
                  <h2>⌞COMMENTS & FEEDBACK⌝</h2> </div>
            <div class="text-center">
            <img src="https://www.recycleit.co.uk/wp-content/uploads/2020/05/HomePageBannerTruck.png" class="img-fluid" alt="Responsive image">
<footer class="text-center text-white" style="background-color: #f1f1f1;">
  <!-- Copyright -->
  <div class="text-center text-dark p-3" style="background-color: rgba(0, 0, 0, 0.2);">
    ©2022 Copyright:
    <a class="text-dark" href="https://pbp-d01.herokuapp.com/">re.cycle</a>
  </div>
  <!-- Copyright -->
</footer>
            </section>
 
            {% endblock %}
        </div>
    </div> 
